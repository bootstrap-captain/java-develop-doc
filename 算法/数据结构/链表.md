æ•°ç»„å„å…ƒç´ æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œé“¾è¡¨ä¸æ˜¯

------

# å•å‘é“¾è¡¨

## 1. ListNode

```java
public class ListNode {
    int val;
    ListNode next;

    public ListNode(int val) {
        this.val = val;
    }

    public ListNode(int val, ListNode next) {
        this.val = val;
        this.next = next;
    }
}
```

```java
public interface SingleListInter {
    void addFirst(int val);

    void addLast(int val);

    void loop(Consumer<Integer> consumer);

    int get(int index);

    void remove(int index);

    void insert(int index, int val);
}
```

## 2. ä¸å¸¦å“¨å…µ

![image-20231123132950873](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231123132950873.png)

```java
package com.citi.node;

import java.util.function.Consumer;

public class SingleListNoDummy implements SingleListInter {
    ListNode head = null;

    @Override
    public void addFirst(int val) {
        head = new ListNode(val, head);
    }

    @Override
    public void addLast(int val) {
        ListNode last = getLast();
        if (last == null) {
            addFirst(val);
            return;
        }
        last.next = new ListNode(val);
    }

    private ListNode getLast() {
        if (head == null) {
            return null;
        } // è¦å•ç‹¬è€ƒè™‘headä¸ºç©ºçš„æƒ…å†µ
        ListNode p = head;
        while (p.next != null) {
            p = p.next;
        }
        return p;
    }

    @Override
    public void loop(Consumer<Integer> consumer) {
        ListNode p = head;
        while (p != null) {
            consumer.accept(p.val);
            p = p.next;
        }
    }

    @Override
    public int get(int index) {
        ListNode node = getByIndex(index);
        if (node == null) {
            throw new IllegalArgumentException("Wrong Index");
        }
        return node.val;
    }

    private ListNode getByIndex(int index) {
        int curIndex = 0;
        ListNode p = head;
        while (p != null) {
            if (index == curIndex) {
                return p;
            }
            curIndex++;
            p = p.next;
        }

        return null;
    }

    @Override
    public void remove(int index) {

    }

    /*æ‰¾ä¸Šä¸€ä¸ªç»“ç‚¹*/
    @Override
    public void insert(int index, int val) {
        if (index == 0) {
            addFirst(val);
            return;
        }
        ListNode prev = getByIndex(index - 1);
        if (prev == null) {
            throw new IllegalArgumentException("Wrong Index");
        }
        prev.next = new ListNode(val, prev.next);
    }
}
```

## 3. å“¨å…µå®ç°

- dummyå…ƒç´ å……å½“å“¨å…µèŠ‚ç‚¹ï¼Œæ–¹ä¾¿é“¾è¡¨ä¸ºç©ºçš„æƒ…å†µ
- æœ‰äº›åœºæ™¯æŒ‡é’ˆå¯ä»¥ä»sentinelç§»åŠ¨ï¼Œæœ‰äº›å¯ä»¥ä»sentinel.nextç§»åŠ¨

![image-20231004182312899](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231004182312899.png)

```java
public class SingleList implements SingleListInter {
    ListNode sentinel = new ListNode(-888, null);

    @Override
    public void addFirst(int val) {
        sentinel.next = new ListNode(val, sentinel.next);
    }

    @Override
    public void addLast(int val) {
        ListNode last = findLastNode();
        last.next = new ListNode(val);
    }

   // å“¨å…µå¯èƒ½ä½œä¸ºlastNode
    private ListNode findLastNode() {
        ListNode p = sentinel;
        while (p.next != null) {
            p = p.next;
        }
        return p;
    }

    @Override
    public void loop(Consumer<Integer> consumer) {
        ListNode p = sentinel.next;
        while (p != null) {
            consumer.accept(p.val);
            p = p.next;
        }
    }

    @Override
    public int get(int index) {
        ListNode result = getNode(index);
        if (result == null) {
            throw new IllegalArgumentException("Wrong Index");
        }
        return result.val;
    }

    /*-1èƒ½å¤Ÿæ‹¿åˆ°å“¨å…µèŠ‚ç‚¹*/
    private ListNode getNode(int index) {
        ListNode p = sentinel;
        int idx = -1;
        while (p != null) {
            if (index == idx) {
                return p;
            }
            p = p.next;
            idx++;
        }
        return null;
    }

    @Override
    public void remove(int index) {
        ListNode preNode = getNode(index - 1);
        ListNode removedNode = getNode(index);
        if (preNode == null || removedNode == null) {
            throw new IllegalArgumentException("Wrong Index");
        }
        preNode.next = removedNode.next;
    }

    @Override
    public void insert(int index, int val) {
        ListNode preNode = getNode(index - 1);
        if (preNode == null) {
            throw new IllegalArgumentException("Wrong Index");
        }
        ListNode inserted = new ListNode(val, preNode.next);
        preNode.next = inserted;
    }
}
```

## 4. æ€§èƒ½

```bash
# æ—¶é—´å¤æ‚åº¦
# éšæœºè®¿é—®
- æ ¹æ®indexæŸ¥æ‰¾  O(n)

# æ’å…¥
- æ’å…¥æœ¬èº«çš„æ˜¯ O(1),  ä½†æ˜¯é¦–å…ˆè¦æ ¹æ®indexéå†æ‰¾åˆ°æ’å…¥ä½ç½®ï¼Œä¹Ÿå°±æ˜¯O(n)
- æ€»ä½“å°±æ˜¯O(n)
    # èµ·å§‹ä½ç½®ï¼šO(1)
    # ç»“æŸä¸ºæ­¢ï¼šå¦‚æœå·²çŸ¥å°¾ç»“ç‚¹ï¼Œæ˜¯O(1), å¦åˆ™å°±æ˜¯O(n)
    # ä¸­é—´ä½ç½®ï¼š O(n)+O(1)=O(n)
```



# åŒå‘é“¾è¡¨

- å¸¦å¤´å“¨å…µå’Œå°¾å“¨å…µçš„åŒå‘é“¾è¡¨

![image-20231004191925877](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231004191925877.png)

## 1. ListNode

- ä¸»è¦å¥½å¤„ï¼šå¯ä»¥é€†åºéå†ï¼Œå¿«é€Ÿæ‰¾åˆ°æœ€åçš„ç»“ç‚¹

```java
class Node {
    int val;
    Node prev;
    Node next;

    public Node(int val, Node prev, Node next) {
        this.val = val;
        this.prev = prev;
        this.next = next;
    }
}
```

## 2. åŒå‘é“¾è¡¨

```java
class DoublyLinkedList {
    Node head;
    Node tail;

    public DoublyLinkedList() {
        head = new Node(Integer.MIN_VALUE, null, null);
        tail = new Node(Integer.MIN_VALUE, null, null);
        head.next = tail;
        tail.prev = head;
    }

    public void addFirst(int val) {
        insert(0, val);
    }

    public void insert(int index, int val) {
        Node prev = getNode(index - 1);
        if (prev == null) {
            throw new IllegalArgumentException("Illegal Index");
        }

        Node next = prev.next;

        /*æ–°èŠ‚ç‚¹*/
        Node inserted = new Node(val, prev, next);
        prev.next = inserted;
        next.prev = inserted;
    }

    public void remove(int index) {
        Node prev = getNode(index - 1);
        if (prev == null) {
            throw new IllegalArgumentException("Illegal Index");
        }
        Node removed = prev.next;
        if (removed == tail) {
            throw new IllegalArgumentException("Illegal Index");
        }

        Node next = removed.next;
        prev.next = next;
        next.prev = prev;
    }

    public void addLast(int val) {
        Node prev = tail.prev;
        Node inserted = new Node(val, null, null);
        prev.next = inserted;
        inserted.prev = prev;

        inserted.next = tail;
        tail.prev = inserted;
    }

    public void removeLast() {
        Node removed = tail.prev;
        if (removed == head) {
            throw new IllegalArgumentException("Illegal Index");
        }

        Node prev = removed.prev;
        prev.next = tail;
        tail.prev = prev;
    }

    private Node getNode(int index) {
        int currentIndex = -2; // headèŠ‚ç‚¹çš„ç´¢å¼•æ˜¯-1
        Node pointer = head;
        while (pointer != tail) {
            currentIndex++;
            if (index == currentIndex) {
                return pointer;
            }
            pointer = pointer.next;
        }
        return null;
    }
}
```

## 3. ç¯å½¢é“¾è¡¨

- åªæœ‰ä¸€ä¸ªå¤´å“¨å…µ

![image-20231005150947772](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231005150947772.png)

```java
class Node{
    int val;
    Node prev;
    Node next;

    public Node(int val, Node prev, Node next) {
        this.val = val;
        this.prev = prev;
        this.next = next;
    }
}
```

```java
class CrossDoublyLinkedList {
    Node sentinel;

    /*ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œå“¨å…µç»“ç‚¹çš„prevå’Œnextéƒ½æŒ‡å‘æœ¬èº«è‡ªå·±*/
    public CrossDoublyLinkedList() {
        sentinel = new Node(Integer.MIN_VALUE, null, null);
        sentinel.prev = sentinel;
        sentinel.next = sentinel;
    }

    public void addFirst(int val) {
        Node prev = sentinel;
        Node next = sentinel.next;
        Node inserted = new Node(val, null, null);
        prev.next = inserted;
        inserted.prev = prev;
        inserted.next = next;
        next.prev = inserted;
    }

    public void addLast(int val) {
        Node last = sentinel.prev;
        Node inserted = new Node(val, null, null);

        inserted.next = sentinel;
        sentinel.prev = inserted;
        last.next = inserted;
        inserted.prev = last;
    }

    public void removeFirst() {
        Node removed = sentinel.next;
        if (removed == sentinel) {
            throw new IllegalArgumentException("Illegal Index");
        }

        Node next = removed.next;
        sentinel.next = next;
        next.prev = sentinel;
    }

    public void removeLast() {
        Node last = sentinel.prev;
        if (last == sentinel) {
            throw new IllegalArgumentException("Illegal Index");
        }

        Node prev = last.prev;
        prev.next = sentinel;
        sentinel.prev = prev;
    }

    public void removeByVal(int val) {
        Node removed = findByVal(val);
        if (removed == null) {
            throw new IllegalArgumentException("No Target Found");
        }

        Node prev = removed.prev;
        Node next = removed.next;
        prev.next = next;
        next.prev = prev;
    }

    private Node findByVal(int val) {
        Node pointer = sentinel.next;
        while (pointer != sentinel) {
            if (val == pointer.val) {
                return pointer;
            }
            pointer = pointer.next;
        }
        return null;
    }

}
```

# LeetCode

- é»˜è®¤æ¯ä¸ªé¢˜ç›®ä¸­éƒ½æ˜¯ç»™ä¸€ä¸ªheadï¼Œå¯ä»¥åœ¨æ–¹æ³•é‡Œé¢æ·»åŠ å“¨å…µ

## ğŸ˜ é“¾è¡¨éå†

### è¿­ä»£

```java
public void loop(ListNode head) {
    ListNode sentinel = new ListNode(-999, head);
    ListNode p = sentinel.next;
    while (p != null) {
        System.out.println(p.val);
        p = p.next;
    }
}
```

### é€’å½’

```java
public void loop(ListNode head) {
    if (head == null) {
        return;
    }
    System.out.println(head.val);
    loop(head.next);
}
```

![image-20231125185211680](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231125185211680.png)



## åè½¬é“¾è¡¨

### ğŸ˜[206. åè½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-linked-list/)

#### è¿­ä»£+æ–°é“¾è¡¨å€¼

- å–å‡ºæ—§é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œå¤´æ’åˆ°æ–°é“¾è¡¨
- åŸæ¥é“¾è¡¨ä¸åŠ¨

```java
public ListNode reverseList(ListNode head) {
    ListNode resultSentinel = new ListNode(-999, null);
    ListNode sentinel = new ListNode(-999, head);
    ListNode p = sentinel.next;
    while (p != null) {
        resultSentinel.next = new ListNode(p.val, resultSentinel.next);
        p = p.next;
    }
    return resultSentinel.next;
}
```

#### è¿­ä»£+æ–°é“¾è¡¨èŠ‚ç‚¹

- åŸæ¥é“¾è¡¨æ¯æ¬¡ç§»é™¤å¤´å…ƒç´ ï¼Œå¤´æ’åˆ°æ–°é“¾è¡¨
- æ“ä½œå®Œæˆåï¼Œæ—§é“¾è¡¨æ—§æ²¡æœ‰æ•°æ®äº†
- ä¸ä¼šåˆ›é€ æ–°çš„èŠ‚ç‚¹

```java
public ListNode reverseList(ListNode head) {
    ListNode resultSentinel = new ListNode(-999, null);

    while (head != null) {
        ListNode el = head;
        el.next = null;
      
        head = head.next;     // æ—§é“¾è¡¨åç§»

        el.next = resultSentinel.next;
        resultSentinel.next = el;
    }
    return resultSentinel.next;
}
```

#### è¿­ä»£+å†’æ³¡

```bash
# æ­¥éª¤
1. å¾—åˆ°headçš„ä¸‹ä¸€ä¸ªå…ƒç´ 
2. å°†ä¸‹ä¸€ä¸ªå…ƒç´ ä»é“¾è¡¨ä¸­åˆ é™¤(headçš„nextæŒ‡å‘ä¸‹ä¸‹ä¸€ä¸ª)
3. åˆ é™¤å…ƒç´ èŠ‚ç‚¹å…ˆå­¤ç«‹èµ·æ¥ï¼ŒnextæŒ‡å‘sentinelçš„next
4. sentinelçš„nextæŒ‡å‘åˆ é™¤å…ƒç´ 
```

![image-20231125174046699](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231125174046699.png)

```java
public ListNode reverseList(ListNode head) {
    if (head == null) {
        return null;
    }
    ListNode sentinel = new ListNode(-999, head);
    while (head.next != null) {
        ListNode rise = head.next;
        head.next = head.next.next;

        rise.next = null;
        rise.next = sentinel.next;
        sentinel.next = rise;
    }
    return sentinel.next;
}
```

#### é€’å½’

```java
public ListNode reverseList(ListNode head) {
    if (head == null || head.next == null) {
        return head; 
    }
    ListNode last = reverseList(head.next);
    head.next.next = head;  // é€†è½¬æŒ‡é’ˆ
    head.next = null;     // æ–­ç¯
    return last;
}
```

![image-20231126115717309](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231126115717309.png)



## ğŸ˜[21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨](https://leetcode.cn/problems/merge-two-sorted-lists/)

### è¿­ä»£ + æ–°é“¾è¡¨

- æ¯”è¾ƒä¸¤ä¸ªé“¾è¡¨ï¼Œè°å°å°±æŠŠè°çš„å€¼ç»™æ–°é“¾è¡¨ï¼Œæ–°é“¾è¡¨æŒ‡é’ˆå’Œå°çš„é“¾è¡¨æŒ‡é’ˆåç§»

```java
public ListNode mergeTwoLists(ListNode list1, ListNode list2) {
    ListNode sentinel = new ListNode(-888);
    ListNode p = sentinel;
    ListNode p1 = list1;
    ListNode p2 = list2;

    while (p1 != null && p2 != null) {
        if (p1.val < p2.val) {
            p.next = new ListNode(p1.val);
            p1 = p1.next;
        } else {
            p.next = new ListNode(p2.val);
            p2 = p2.next;
        }
        p = p.next;
    }
    p.next = p1 == null ? p2 : p1;
    return sentinel.next;
}
```

### é€’å½’-TODO



## åˆ é™¤å…ƒç´ 

### ğŸ˜[203. ç§»é™¤é“¾è¡¨å…ƒç´ ](https://leetcode.cn/problems/remove-linked-list-elements/)-ByValue

#### è¿­ä»£

```java
public ListNode removeElements(ListNode head, int val) {
    ListNode sentinel = new ListNode(-888, head);
    ListNode prev = sentinel;
    ListNode p = sentinel.next;
    while (p != null) {
        if (p.val != val) {
            prev = p;
        } else {
            prev.next = p.next;
        }
        p = p.next;
    }
    return sentinel.next;
}
```

#### é€’å½’

```java
public ListNode removeElements(ListNode head, int val) {
    if (head == null) {
        return null;
    }

    if (head.val == val) {
        return removeElements(head.next, val);
    } else {
        head.next = removeElements(head.next, val);
        return head;
    }
}
```



### ğŸ˜[83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ](https://leetcode.cn/problems/remove-duplicates-from-sorted-list/)

#### è¿­ä»£



## 

```java
public ListNode removeElements(ListNode head, int val) {
    ListNode sentinel = new ListNode(-888, head);
    ListNode p = sentinel.next;
    ListNode prev = sentinel;

    while (p != null) {
        if (p.val == val) {
            prev.next = p.next; // ç›¸ç­‰æ—¶ä¸ç§»åŠ¨prev
        } else {
            prev = p; // ä¸ç­‰æ—¶ç§»åŠ¨prev
        }
        p = p.next;
    }
    return sentinel.next;
}
```

## ğŸ˜¡[19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/)

### æ­£åºéå†

- ç¬¬ä¸€æ¬¡éå†ï¼Œå¾—åˆ°è¦åˆ é™¤çš„ç»“ç‚¹çš„ç´¢å¼•
- ç¬¬äºŒæ¬¡éå†ï¼Œåˆ é™¤æŒ‡å®šçš„ç»“ç‚¹

```java
public ListNode removeNthFromEnd(ListNode head, int n) {
    ListNode sentinel = new ListNode(-888, head);
    int length = 0;
    ListNode p = sentinel.next;
    /*1. ç¬¬ä¸€æ¬¡éå†ï¼Œè®¡ç®—é•¿åº¦*/
    while (p != null) {
        length++;
        p = p.next;
    }
    int removedIndex = length - n;
    /*2. ç¬¬äºŒæ¬¡éå†ï¼Œåˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ , removedIndex-1*/
    ListNode removedNode = getByIndex(removedIndex, sentinel);
    ListNode prevNode = getByIndex(removedIndex - 1, sentinel);
    prevNode.next = removedNode.next;
    return sentinel.next;
}

private ListNode getByIndex(int index, ListNode sentinel) {
    int idx = -1;
    ListNode p = sentinel;
    while (p != null) {
        if (idx == index) {
            return p;
        }
        idx++;
        p = p.next;
    }
    return null;
}
```

### å¿«æ…¢æŒ‡é’ˆ

![image-20231008115435110](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231008115435110.png)

```java
public ListNode removeNthFromEnd(ListNode head, int n) {
    ListNode sentinel = new ListNode(-888, head);
    ListNode slow = sentinel;
    ListNode fast = sentinel;
    for (int i = 0; i < n; i++) {
        fast = fast.next;
    }
    while (fast.next != null) {
        slow = slow.next;
        fast = fast.next;
    }
    slow.next = slow.next.next;
    return sentinel.next;
}
```



## ğŸ˜[876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹](https://leetcode.cn/problems/middle-of-the-linked-list/)

### ä¸¤æ¬¡è¿­ä»£

- ç¬¬ä¸€éæ‰¾åˆ°ä¸­é—´ç´¢å¼•
- ç¬¬äºŒæ¬¡æ‰¾åˆ°ä¸­é—´ç»“ç‚¹

```java
public ListNode middleNode(ListNode head) {
    /*ç¬¬ä¸€æ¬¡éå†ï¼šæ‰¾åˆ°ä¸­é—´ç´¢å¼•*/
    ListNode sentinel = new ListNode(-999, head);
    ListNode p = sentinel.next;
    int index = -1;
    while (p != null) {
        index++;
        p = p.next;
    }

    int middleIndex = (index + 1) / 2;

    /*ç¬¬äºŒæ¬¡éå†*/
    ListNode p1 = sentinel.next;
    int idx = -1;
    while (p1 != null) {
        idx++;
        if (idx == middleIndex) {
            return p1;
        }
        p1 = p1.next;
    }
    return null;
}
```

### å¿«æ…¢æŒ‡é’ˆ

- æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€ä¸ªï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨2ä¸ª
- å¿«æŒ‡é’ˆæŒ‡å‘nullæ—¶ï¼Œæ…¢æŒ‡é’ˆçš„å½“å‰ä½ç½®

![image-20231009154523418](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231009154523418.png)

```java
public ListNode middleNode(ListNode head) {
    ListNode sentinel = new ListNode(-999, head);
    ListNode slow = sentinel;
    ListNode fast = sentinel;
    while (fast != null) {
        slow = slow.next;
        fast = fast.next;
        if (fast != null) {
            fast = fast.next;
        }
    }
    return slow;
}
```



## å…¶ä»–é¢˜ç›®

```java
public ListNode removeNthFromEnd(ListNode head, int n) {
    ListNode sentinel = new ListNode(Integer.MIN_VALUE, head);
    ListNode fast = sentinel;
    ListNode slow = sentinel;
    for (int i = 0; i < n; i++) {
        fast = fast.next;
    }

    while (fast.next != null) {
        slow = slow.next;
        fast = fast.next;
    }
    slow.next = slow.next.next;
    return sentinel.next;
}
```

#### æœ‰åºå»é‡

- é‡å¤å…ƒç´ ä¿ç•™ä¸€ä¸ª

##### pre+current

```java
public ListNode deleteDuplicates(ListNode head) {
    ListNode sentinel = new ListNode(Integer.MIN_VALUE, head);
    ListNode pre = sentinel;
    ListNode current = sentinel.next;
    while (current != null) {
        if (pre.val == current.val) {
            pre.next = current.next;
        } else {
            pre = pre.next;
        }
        current = current.next;
    }
    return sentinel.next;
}
```

#### æœ‰åºå»é‡

- é‡å¤å…ƒç´ åˆ é™¤

##### p1+p2+p3

![image-20231009110239365](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231009110239365.png)

```java
public ListNode deleteDuplicates(ListNode head) {
    if (head == null || head.next == null) {
        return head;
    }
    ListNode sentinel = new ListNode(Integer.MIN_VALUE, head);
    ListNode p1 = sentinel;
    ListNode p2 = p1.next;
    ListNode p3 = p2.next;

    while (p3 != null) {
        if (p3.val != p2.val) {
            p1 = p2;
            p2 = p3;
            p3 = p3.next;
        } else {
            while (p3 != null && p3.val == p2.val) {
                p3 = p3.next;
            }
            p1.next = p3;
            p2 = p3;
            if (p3 != null) {
                p3 = p3.next;
            }
        }
    }
    return sentinel.next;
}
```











```java
    public ListNode middleNode(ListNode head) {
        if (head == null) {
            return null;
        }
        ListNode sentinel = new ListNode(Integer.MIN_VALUE, head);
        ListNode fast = sentinel;
        ListNode slow = sentinel;
        while (fast != null) {
            slow = slow.next;
            fast = fast.next;
            if (fast != null){
                fast = fast.next;
            }
        }
        return slow;
    }
```
