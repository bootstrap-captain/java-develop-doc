# æ ˆ

- åªèƒ½ä»æ•°æ®ç»“æ„çš„ä¸€ç«¯è¿›è¡Œæ“ä½œï¼Œå…ˆè¿›åå‡º

![image-20231016113311031](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231016113311031.png)

```java
package com.citi.stack;

public interface MyStack {
    boolean push(int val);

    int pop();

    int peek();

    boolean isEmpty();

    boolean isFull();
}
```

## 1. é“¾è¡¨å®ç°

- å•å‘å¸¦å“¨å…µé“¾è¡¨ï¼Œå¤´æ’å¤´å‡º

![image-20231016115640568](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231016115640568.png)

```java
package com.citi.stack;

import java.util.NoSuchElementException;

public class LinkedListStack implements MyStack {
    class Node {
        int val;
        Node next;

        public Node(int val, Node next) {
            this.val = val;
            this.next = next;
        }
    }

    Node sentinel = new Node(-999, null);
    int size;
    int capacity;

    public LinkedListStack(int capacity) {
        this.capacity = capacity;
    }

    @Override
    public boolean push(int val) {
        if (isFull()) {
            return false;
        }
        sentinel.next = new Node(val, sentinel.next);
        size++;
        return true;
    }

    @Override
    public int pop() {
        if (isEmpty()) {
            throw new NoSuchElementException("Empty Stack");
        }
        Node removed = sentinel.next;
        sentinel.next = removed.next;
        size--;
        return removed.val;
    }

    @Override
    public int peek() {
        if (isEmpty()) {
            throw new NoSuchElementException("Empty Stack");
        }
        return sentinel.next.val;
    }

    @Override
    public boolean isEmpty() {
        return size == 0;
    }

    @Override
    public boolean isFull() {
        return size == capacity;
    }
}
```

## 2. æ•°ç»„å®ç°

![image-20231202101646696](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231202101646696.png)

```java
package com.citi.stack;

import java.util.NoSuchElementException;

public class ArrayStack implements MyStack {
    int[] arr;

    int top = 0;

    public ArrayStack(int capacity) {
        arr = new int[capacity];
    }

    @Override
    public boolean push(int val) {
        if (isFull()) {
            return false;
        }
        arr[top] = val;
        top++;
        return true;
    }

    @Override
    public int pop() {
        if (isEmpty()) {
            throw new NoSuchElementException("Empty Stack");
        }
        int result = arr[top - 1];
        arr[top - 1] = -999;
        top--;
        return result;
    }

    @Override
    public int peek() {
        if (isEmpty()) {
            throw new NoSuchElementException("Empty Stack");
        }
        return arr[top - 1];
    }

    @Override
    public boolean isEmpty() {
        return top == 0;
    }

    @Override
    public boolean isFull() {
        return top == arr.length;
    }
}
```



## 3. JDKå®ç°

### 3.1 LinkedList

### 3.2 ArrayDeque

# Leetcode

## ğŸ˜ [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/valid-parentheses/)

### æ ˆ

- éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœå·¦è¾¹ç¬¦å·ï¼Œåˆ™å…¥æ ˆå¦ä¸€åŠå­—ç¬¦ï¼›
- å¦‚æœå³è¾¹ï¼Œåˆ™å‡ºæ ˆå¹¶æ¯”è¾ƒ

```java
public boolean isValid(String s) {
    LinkedList<Character> stack = new LinkedList<>();
    char[] chs = s.toCharArray();

    if (chs.length % 2 != 0) {
        return false;
    }
    for (char ch : chs) {
        if (ch == '{') {
            stack.push('}');
        } else if (ch == '[') {
            stack.push(']');
        } else if (ch == '(') {
            stack.push(')');
        } else {
            if (stack.isEmpty()) {
                return false;
            }
            if (stack.pop()!=ch){
                return false;
            }
        }
    }
    return stack.isEmpty();
}
```

## é€†æ³¢å…°è¡¨è¾¾å¼

### ğŸ˜¡[150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼](https://leetcode.cn/problems/evaluate-reverse-polish-notation/)

- <font color=orange>åç¼€è¡¨è¾¾å¼</font>ï¼šè¿ç®—ç¬¦å·åœ¨æ•°å­—çš„åé¢ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘ä¼˜å…ˆçº§é—®é¢˜
- JVMçš„è¿ç®—æŒ‡ä»¤å°±æ˜¯è¿™ä¹ˆç©çš„

#### æ ˆ

- ç¢°è§ç¬¦å·å°±æŠŠå‰é¢ä¸¤ä¸ªæ•°å­—å¼¹å‡ºæ ˆ
- è¿ç®—å®Œæˆåé‡æ–°å…¥æ ˆ

```java
public int evalRPN(String[] tokens) {
      LinkedList<Integer> stack = new LinkedList<>();
      for (String token : tokens) {
          // å¤„ç†å…·ä½“é€»è¾‘
          Integer second;
          Integer first;
          switch (token) {
              case "+":
                  second = stack.pop();
                  first = stack.pop();
                  stack.push(first + second);
                  break;
              case "-":
                  second = stack.pop();
                  first = stack.pop();
                  stack.push(first - second);
                  break;
              case "*":
                  second = stack.pop();
                  first = stack.pop();
                  stack.push(first * second);
                  break;
              case "/":
                  second = stack.pop();
                  first = stack.pop();
                  stack.push(first / second);
                  break;
              default:
                  stack.push(Integer.valueOf((token)));
          }
      }
      return stack.pop();
  }
```

### ğŸ˜¡ä¸­ç¼€è½¬åç¼€-æ— æ‹¬å·

- ç»™ä¸€ä¸ªä¸­ç¼€è¡¨è¾¾å¼ï¼Œå°†å…¶è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼

![image-20231202132427456](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231202132427456.png)

```java
/*ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€*/
public String convert(String str) {
    LinkedList<Character> stack = new LinkedList<>();
    StringBuffer sb = new StringBuffer();
    char[] chs = str.toCharArray();

    for (char ch : chs) {
        if (priority(ch) == -1) {  // 1. ä¸æ˜¯è¿ç®—ç¬¦ï¼Œåˆ™ç›´æ¥æ‹¼æ¥
            sb.append(ch);
        } else {                   // 2. æ˜¯è¿ç®—ç¬¦
            if (stack.isEmpty()) {
                stack.push(ch);           // 2.1 æ ˆå¦‚æœä¸ºç©ºï¼Œåˆ™ç›´æ¥æ·»åŠ 
            } else {                      // 2.2 æ ˆä¸ç©ºï¼Œåˆ¤æ–­
                if (priority(ch) <= priority(stack.peek())) {
                    while (!stack.isEmpty() && stack.peek() >= priority(ch)) {
                        sb.append(stack.pop());
                    }
                }
                stack.push(ch);
            }
        }
    }
    //3. å¤„ç†å®Œæˆåï¼ŒæŠŠæ ˆé‡Œçš„å…ƒç´ ä¾æ¬¡å‡ºæ ˆæ‹¼æ¥
    while (!stack.isEmpty()) {
        sb.append(stack.pop());
    }
    return sb.toString();
}

private int priority(char ch) {
    switch (ch) {
        case '+':
        case '-':
            return 0;
        case '*':
        case '/':
            return 1;
        default:
            return -1;
    }
}
```

## ğŸ˜[232. ç”¨æ ˆå®ç°é˜Ÿåˆ—](https://leetcode.cn/problems/implement-queue-using-stacks/)

- å‡ºçš„æ—¶å€™ï¼Œå…ˆæŠŠå½“å‰çš„outStackä¸­å‡ºå®Œï¼Œå†å»å€’æ‰‹

![image-20231018120502207](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231018120502207.png)

```java
import java.util.LinkedList;
import java.util.NoSuchElementException;

class MyQueue {

    LinkedList<Integer> inStack = new LinkedList<>();
    LinkedList<Integer> outStack = new LinkedList<>();

    int size = 0;


    public MyQueue() {
    }

    public void push(int x) {
        inStack.push(x);
        size++;
    }

    public int pop() {
        if (empty()) {
            throw new NoSuchElementException("Empty Queue");
        }

        if (outStack.isEmpty()) {
            while (!inStack.isEmpty()) {
                outStack.push(inStack.pop());
            }
        }
        size--;
        return outStack.pop();
    }

    public int peek() {
        if (empty()) {
            throw new NoSuchElementException("Empty Queue");
        }

        if (outStack.isEmpty()) {
            while (!inStack.isEmpty()) {
                outStack.push(inStack.pop());
            }
        }
        return outStack.peek();
    }

    public boolean empty() {
        return size == 0;
    }
}
```

## ğŸ˜[225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ](https://leetcode.cn/problems/implement-stack-using-queues/)

![image-20231202135602075](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231202135602075.png)

```java
import java.util.LinkedList;
import java.util.NoSuchElementException;

class MyStack {

    LinkedList<Integer> queue = new LinkedList<>();

    public MyStack() {
    }

    public void push(int x) {
        queue.push(x);
        for (int i = 0; i < queue.size() - 1; i++) {
            queue.push(queue.pop());
        }
    }

    public int pop() {
        if (empty()) {
            throw new NoSuchElementException("Empty Queue");
        }
        return queue.pop();
    }

    public int top() {
        if (empty()) {
            throw new NoSuchElementException("Empty Queue");
        }
        return queue.peek();
    }

    public boolean empty() {
        return queue.isEmpty();
    }
}
```
